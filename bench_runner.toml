# After making changes to this file, re-run:
#    python -m bench_runner install
# to have the changes reflected in the generated workflow files

[bases]
# List the base versions you want to compare every benchmark run to
versions = ["3.11.0", "3.12.0", "3.13.0"]
# List of configuration flags that are compared against the default build of its commit merge base.
compare_to_default = []

[benchmarks]
# List any benchmarks you want to exclude from results here
excluded_benchmarks = [
    "aiohttp",
    "asyncio_tcp",
    "asyncio_tcp_ssl",
    "bench_mp_pool",
    "concurrent_imap",
    "deepcopy_reduce",
    "logging_silent",
    "pickle",
    "pickle_dict",
    "pickle_list",
    "unpack_sequence",
    "unpickle",
    "unpickle_list",
]

[notify]
# The number of the issue in your repo that will have comments added to
# it to send nofications
# Set to 0 to disable notifications
notification_issue = 0

# Each of the "runners" section has the following values:
# os: one of 'linux', 'darwin', 'windows'
# arch: 'amd64' or 'arm64' (used for display only)
# hostname: Must match the hostname of the machine (as retrieved from
#   socket.gethostname()).
# available: True if the machine is available (we need to keep the
#   metadata around for old machines for the generated results). (Default: True)
# include_in_all: Whether to include the runner when choosing to run a
#   benchmark on all runners.
# env: a table of extra environment variables to pass to the runs.
#
# A few notable environment variables for runners:
# CC, CXX: used by Python's configure to determine the compiler to use.
# LLVM_AR, LLVM_PROFDATA: used for PGO optimization passes with clang, when
#   using a version of clang that isn't the default. These must be full
#   paths for configure to handle them correctly.
# LLVM_BOLT, MERGE_FDATA: like AR/PROFDATA, but for BOLT.
#   LLVM_BOLT may need to point to, e.g., /usr/lib/llvm-19/bin/llvm-bolt
#   rather than /usr/bin/llvm-bolt-19 (see
#   https://github.com/python/cpython/issues/127047).
# PYTHON_CONFIGURE_FLAGS: extra flags to pass to Python's configure. These
#   can override all earlier flags, which by default include
#   --enable-optimizations and --with-lto=full.
# BUILD_DEST: (windows only) where to make build.bat install. This is
#   required for the Windows build to succeed.

[runners.blueberry]
os="linux"
arch="arm64"
hostname="blueberry"
available = true
use_cores = 4

[runners.ripley]
os="linux"
arch="x86_64"
hostname="ripley"
available = true
use_cores = 6

[runners.jones]
os="darwin"
arch="arm64"
hostname="jones.local"
available = true
use_cores = 11

[publish_mirror]
skip = true

[install]
# Skip generating these template files
skip_templates = ["ci.src.yml"]

[weekly]
# Weekly runs disabled - using nightly instead

[nightly.default]
runners = ["blueberry", "ripley"]
flags = []

[nightly.jit]
runners = ["blueberry", "ripley"]
flags = ["JIT"]

# jones (macOS) uses tail calls for both default and JIT builds
[nightly.default-tailcall]
runners = ["jones"]
flags = ["TAILCALL"]

[nightly.jit-tailcall]
runners = ["jones"]
flags = ["JIT", "TAILCALL"]

